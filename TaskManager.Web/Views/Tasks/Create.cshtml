@{
    ViewBag.Title = "添加任务";
    ViewBag.TitleSmall = "";

    ViewBag.Breadcrumb = new Breadcrumb(new Crumb[] {
        new Crumb("任务管理", "", "fa-dashboard"),
        new Crumb("任务列表", Url.Action("Index"), ""),
        new Crumb("添加任务","" , "")
    });
}
@using System.Web.Optimization
@using Abp.Web.Mvc.Extensions
@model TaskManager.Tasks.Dto.TaskOutput
<link href="~/Content/bootstrap-fileinput/css/fileinput.min.css" rel="stylesheet" />
<link href="~/Content/bootstrapValidator.min.css" rel="stylesheet" />
<div class="panel panel-default">
    <div class="panel-body">
        <form id="categoryForm" action="@Url.Action("AjaxCreate")" class="form-horizontal">
            <div class="hidden">
                <input type="hidden" id="Id" name="Id" value="@Model.Id" />
            </div>
            <div class="form-group">
                <label for="TaskName" class="col-md-2 control-label">任务名称</label>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="TaskName" id="TaskName" value="@Model.TaskName"
                           placeholder="请输入任务名称" required maxlength="50">
                </div>
            </div>
            <div class="form-group">
                <label for="CategoryId" class="col-md-2 control-label">分类</label>
                <div class="col-md-6">
                    @Html.DropDownListFor(a => a.CategoryId, ViewData["Categories"] as SelectList,
                        new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label for="NodeId" class="col-md-2 control-label">节点</label>
                <div class="col-md-6">
                    @Html.DropDownListFor(a => a.NodeId, ViewData["Nodes"] as SelectList,
                        new { @class = "form-control" })
                </div>
            </div>
            <div class="form-group">
                <label for="AppConfigJson" class="col-md-2 control-label">配置json</label>
                <div class="col-md-6">
                    <textarea class="form-control" name="AppConfigJson" id="AppConfigJson" maxlength="1000" required rows="3" placeholder="请输入配置json">@Model.AppConfigJson</textarea>
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范:{"key1":"value1","key2":"value2"}</span>
                </div>
            </div>
            <div class="form-group">
                <label for="AppConfigJson" class="col-md-2 control-label">数据库临时数据json</label>
                <div class="col-md-6">
                    <textarea class="form-control" name="TempDataJson" id="TempDataJson" maxlength="1000" required rows="3" placeholder="请输入数据库临时数据json">@Model.TempDataJson</textarea>
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范:{"key1":"value1","key2":"value2"}</span>
                </div>
            </div>
            <div class="form-group">
                <label for="Cron" class="col-md-2 control-label">Cron表达式</label>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="Cron" id="Cron" value="@Model.Cron"
                           placeholder="请输入Cron表达式" required maxlength="50">
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范：0/5 * * * * ?</span>
                </div>
            </div>
            <div class="form-group">
                <label for="MainClassDllFileName" class="col-md-2 control-label">入口类的命名空间</label>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="MainClassDllFileName" id="MainClassDllFileName" value="@Model.MainClassDllFileName"
                           placeholder="请输入任务入口类的命名空间" required maxlength="100">
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范：Dyd.BaseService.TaskManager.Demo.DemoTask</span>
                </div>
            </div>
            <div class="form-group">
                <label for="MainClassNameSpace" class="col-md-2 control-label">入口dll文件名</label>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="MainClassNameSpace" id="MainClassNameSpace" value="@Model.MainClassNameSpace"
                           placeholder="请输入任务入口dll文件名" required maxlength="100">
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范：Dyd.BaseService.TaskManager.Demo.exe</span>
                </div>
            </div>
            <div class="form-group">
                <label for="Version" class="col-md-2 control-label">版本号</label>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="Version" id="Version" value="@Model.Version"
                           placeholder="请输入版本号" required maxlength="50">
                </div>
                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范：1（必须是整形）</span>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-10  col-md-offset-2" id="divFileZipName">
                    <span><b>@Model.FileZipName</b></span>
                </div>
                <label for="MainClassNameSpace" class="col-md-2 control-label">上传打包文件</label>
                <div class="col-md-6">
                    <input id="FileUpload" name="FileUpload" type="file" data-show-upload="true" data-show-preview="false">
                    <input id="FileZipPath" name="FileZipPath" type="hidden" value="@Model.FileZipPath" />
                    <input id="FileZipName" name="FileZipName" type="hidden" value="@Model.FileZipName" />
                </div>

                <div class="col-md-6  col-md-offset-2">
                    <span class="help-block">示范：以.zip为后缀的压缩包</span>
                </div>
            </div>

            <div class="form-group">
                <label for="AppConfigJson" class="col-md-2 control-label">备注</label>
                <div class="col-md-6">
                    <textarea class="form-control" name="Remark" id="Remark" maxlength="2000" required rows="3" placeholder="请输入备注">@Model.Remark</textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-6 col-md-offset-2">
                    <a href="@Url.Action("Index")" class="btn btn-primary">返回列表</a>
                    <button type="submit" id="btnSave" class="btn btn-primary">
                        <i class="fa fa-sign-in"></i> 保存
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>
@Scripts.Render("~/plugins/jshow")
<script src="~/Scripts/fileinput.min.js"></script>
<script src="~/Scripts/fileinput_locale_zh.js"></script>
<script src="~/Scripts/Common.js"></script>
<script src="~/Scripts/bootstrapValidator.min.js"></script>
@section scripts
{
    @Html.IncludeScript("~/Views/Tasks/Create.js")
}
